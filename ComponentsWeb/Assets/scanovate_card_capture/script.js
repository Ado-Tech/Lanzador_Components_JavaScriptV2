!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.scanovate_card_capture=t():e.scanovate_card_capture=t()}(window,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){(function(i){t.log=function(...e){return"object"==typeof console&&console.log&&console.log(...e)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let i=0,r=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(i++,"%c"===e&&(r=i))}),t.splice(r,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=n(6)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,n(5))},function(e,t,n){"use strict";const i=n(0)("active-ocr-client:video"),r=n(8),s=n(2),a=n(9),{ScanovateCameraError:o}=n(3);class c{constructor(e,t){this.constraintsObj=t,this._stream=this.canvas=this.context=this.lastDeviceId=null,this.element=e}static drawRotatedImageOnCanvas(e,t,n=90){90===n||270===n?90===n?e.setTransform(0,1,-1,0,e.canvas.width,0):e.setTransform(0,-1,1,0,0,e.canvas.height):0===n?e.setTransform(1,0,0,1,0,0):e.setTransform(-1,0,0,-1,e.canvas.width,e.canvas.height),t&&t(),e.setTransform(1,0,0,1,0,0)}capture(e){return new Promise((t,n)=>{this.canvas||(this.canvas=document.createElement("canvas")),this.context||(this.context=this.canvas.getContext("2d"));const i=Math.max(this.element.videoWidth,this.element.videoHeight),r=Math.min(this.element.videoWidth,this.element.videoHeight);this.canvas.width!==i&&(this.canvas.width=i),this.canvas.height!==r&&(this.canvas.height=r);this.isHeightGreaterThanWidth()?c.drawRotatedImageOnCanvas(this.context,()=>{this.context.drawImage(this.element,0,0)},270):this.context.drawImage(this.element,0,0,this.canvas.width,this.canvas.height);return t(this.canvas.toDataURL("image/jpeg",e))})}isHeightGreaterThanWidth(){return this.element?this.element.videoHeight>this.element.videoWidth:null}_initVideo(e){return new Promise((t,n)=>{i("video init start"),this.element.controls=!1;let s={video:{facingMode:"environment",width:this.constraintsObj.width,height:this.constraintsObj.height},audio:!1};e&&(s.video.deviceId={exact:e}),this.destroy(!1),null!=e&&this.lastDeviceId!==e&&(this.lastDeviceId=e),i("constrains: "+JSON.stringify(s)),null===this._stream?r(s).then(e=>{i("navigator.mediaDevices.getUserMedia called"),this._stream=e,t(this._stream)},e=>{i(`getUserMedia error, name: ${e&&e.name}, message: ${e&&e.message}`),n(new o(e&&e.message))}):(i("Reusing previous stream"),t(this._stream))})}_attachStreamToElement(){i("_attachStreamToElement called");const e="video element was destroyed or wasn't set";return new Promise((t,n)=>{if(null===this.element||void 0===this.element)return n(new Error(e));const r=()=>{if(null===this.element||void 0===this.element)return n(new Error(e));i("calling _finishVideoSetup"),this.element.width=this.element.videoWidth||320,this.element.height=this.element.videoHeight||240,t(this.element)};this.canPlayEventListener=()=>{if(null===this.element||void 0===this.element)return n(new Error(e));const t=this.element.play();void 0!==t&&t.then(()=>{i("Autoplay started")}).catch(()=>{i("Autoplay was prevented")})},this.playEventListener=()=>{i("canPlayEventListener called"),r()},this.loadedMetadataEventListener=()=>{if(null===this.element||void 0===this.element)return n(new Error(e));i("loadedMetadataEventListener called")},this.element.addEventListener("play",this.playEventListener,!1);const s=this.element.readyState;i("Video element readyState: "+s),3===s||4===s?(this.loadedMetadataEventListener(),this.canPlayEventListener()):(this.element.addEventListener("canplay",this.canPlayEventListener,!1),this.element.addEventListener("loadedmetadata",this.loadedMetadataEventListener,!1));try{if("srcObject"in this.element)this.element.srcObject=this._stream,i("srcObject in video element was set");else{const e=window.URL||window.webkitURL||window.mozURL||window.msURL;this.element.src=e.createObjectURL(this._stream),i("src in video element was set")}}catch(e){i(`can't send a stream to a video element. err name: ${e.name}, err message: ${e.message}`),n(e)}})}static findLastEnumeratedDeviceId(){return navigator.mediaDevices.enumerateDevices().then((function(e){const t=e.filter((function(e){return"videoinput"===e.kind}));let n=t.filter((function(e){const t=e.label,n=a.isLabelBackLabel(t);return i(`Label "${t}" is found to be backside? ${n}`),n}));return 0===n.length&&(n=t),i(`Found #${n.length} relevant devices`),0===n.length?Promise.reject(new customErrors.CameraNoRelevantDeviceFound):n[n.length-1].deviceId}))}init(){const e=e=>{const t=s.enum.CHROME===s.detectBroswer();return(t?c.findLastEnumeratedDeviceId():Promise.resolve()).then(n=>(!!(e||n&&n!==this.lastDeviceId&&t)?this._initVideo(n):Promise.resolve()).then(()=>{this._attachStreamToElement()}))};return this._initVideo(this.lastDeviceId).then(t=>e(!1)).catch(t=>{if(t instanceof d)throw t;return e(!0).catch(e=>{throw e})}).catch(e=>{throw i("Error enumerating devices: "+e.message),e})}static killStream(e,t){t&&i("killStream optionalExtraLog: "+t);let n=e;e&&(Array.isArray(e)||(n=[e]),n.forEach((e,t)=>{i("Stops camera stream #"+t),(e&&e.getTracks()||[]).forEach((function(e){e.stop()}))}))}stopStreaming(e){i("stopStreaming has called"),!0!==e&&s.enum.SAFARI===s.detectBroswer()||((this._stream&&this._stream.getTracks()||[]).forEach((function(e){e.stop()})),this._stream=null),this.element&&this.element.srcObject?this.element.srcObject=null:this.element&&this.element.src&&(this.element.src=null)}removeListeners(){this.element&&(this.element.removeEventListener("play",this.playEventListener,!1),this.element.removeEventListener("canplay",this.canPlayEventListener,!1),this.element.removeEventListener("loadedmetadata",this.loadedMetadataEventListener,!1))}destroy(e){i("Destroying video, removeElement: "+e),this.stopStreaming(!1!==e),this.removeListeners();const t=()=>{this.element&&(i("Removing video element"),this.element.parentNode.removeChild(this.element),this.element=null)};null!=e?!0===e&&t():t()}}function l(){}function d(){this.name="getUserMediaNotImplemented",this.message="getUserMedia is not implemented in this browser",this.stack=(new Error).stack}l.prototype=new Error,d.prototype=new l,new l,e.exports=c},function(e,t,n){"use strict";n(0)("active-ocr-client:browserDetector");const i={FIREFOX:"Mozilla Firefox",OPERA:"Opera",TRIDENT:"Microsoft Internet Explorer",EDGE:"Microsoft Edge",CHROME:"Google Chrome or Chromium",SAFARI:"Apple Safari",UNKNOWN:"unknown"};e.exports={detectBroswer:function(){const e=navigator.userAgent;let t;t=e.indexOf("Firefox")>-1?i.FIREFOX:e.indexOf("Opera")>-1?i.OPERA:e.indexOf("Trident")>-1?i.TRIDENT:e.indexOf("Edge")>-1?i.EDGE:e.indexOf("Chrome")>-1?i.CHROME:e.indexOf("Safari")>-1?i.SAFARI:i.UNKNOWN;return t},enum:i}},function(e,t,n){"use strict";function i(e){this.message=e,this.name="ScanovateCameraError"}e.exports={ScanovateCameraError:i},i.prototype=new Error},function(e,t,n){"use strict";const i=n(1),{ScanovateCameraError:r}=(n(2),n(3)),s=n(0)("active-ocr-client:manager"),a=(n(1),n(10)),o=n(13);document.documentElement;let c=null;function l(e){const t=document.documentElement;return e.COLORS&&(e.COLORS.instructionsColor&&t.style.setProperty("--scanovate-card-capture-instructions-color",e.COLORS.instructionsColor),e.COLORS.loaderColor&&t.style.setProperty("--scanovate-card-capture-loader-color",e.COLORS.loaderColor),e.COLORS.popupBackgroundColor&&t.style.setProperty("--scanovate-card-capture-popup-background-color",e.COLORS.popupBackgroundColor),e.COLORS.popupTextColor&&t.style.setProperty("--scanovate-card-capture-popup-text-color",e.COLORS.popupTextColor),e.COLORS.primaryColor&&t.style.setProperty("--scanovate-card-capture-primary-color",""+e.COLORS.primaryColor),e.COLORS.backArrow&&t.style.setProperty("--scanovate-card-capture-back-arrow-color",""+e.COLORS.backArrow),e.COLORS.instructionsTextColor&&t.style.setProperty("--scanovate-card-capture-instructions-text-color",""+e.COLORS.instructionsTextColor),e.COLORS.positionInstructionTextBackground&&t.style.setProperty("--scanovate-card-capture-instructions-background-color",""+e.COLORS.positionInstructionTextBackground)),e.FONT&&e.FONT&&t.style.setProperty("--scanovate-card-capture-font",""+e.FONT),console.log(`card_capture is configured to capture #${e&&e.NUMBER_OF_IMAGES||1} images`),e}e.exports=function(e){const t=document.location.origin.match(/^https?\:\/\/([^\/:?#]+)(?:[\/:?#]|$)/i),n=t&&t[1],r=location.port;location.protocol;class d extends o{constructor(e){super(),this.data=l.call(this,e||{}),this.translation=a.getTranslationObject(this.data&&this.data.language?this.data&&this.data.language:"en"),this.numOfPics=this.data.NUMBER_OF_IMAGES,this.initPromise,this.videoObj,this.firstPage.bind(this),this.img_1=null,this.img_2=null}applyNewConfig(e){this.data=l.call(this,e||this.data||{})}createDiv(e,t,n,i,r,a,o){let c=document.createElement(e);if(t&&c.setAttribute("id",t),n&&c.classList.add(n),i&&(c.style.visibility=i),r&&(c.style.opacity=r),"img"===e&&a&&(c.src=a),o&&"object"==typeof o){s("Will put the following attributes on element: "+JSON.stringify(o));for(let e in o)s(`Attribute '${e}' will have the following property: ${o[e]||""}`),c.setAttribute(e,o[e]||"")}return c}firstPage(e){e&&setTimeout(()=>(this.emit("success",{firstCapture:e,secondCapture:null}),c=null,this.destroyFirstPage(),document.createElement("div")),1e4),document.querySelector("html").style.background="black";this.numOfPics=this.data.NUMBER_OF_IMAGES="number"==typeof this.data.NUMBER_OF_IMAGES?this.data.NUMBER_OF_IMAGES:1;const t=[];let n;if(n)return n;n=document.createElement("section");const r=this.createDiv("img","loader","scanovate-card-capture-index-loader",void 0,1),a=this.createDiv("button","back-button","scanovate-card-capture-index-back-button","hidden",void 0);a.onclick=this.destroyFirstPage.bind(this);const o=this.createDiv("img",void 0,"scanovate-card-capture-index-arrow",void 0,void 0),l=this.createDiv("div","main-container","scanovate-card-capture-index-main-container","hidden"),d=this.createDiv("div",void 0,"scanovate-card-capture-index-video-container"),u=this.createDiv("video","video","scanovate-card-capture-index-video","hidden",void 0,void 0,{autoplay:null,muted:null,playsinline:null});u.muted=!0;const h=this.createDiv("img","resultImg","scanovate-card-capture-index-video");h.classList.add("scanovate-card-capture-index-temp-background-img");const p=this.createDiv("h1","video-title","scanovate-card-capture-index-video-title");d.appendChild(u),d.appendChild(p);const m=this.createDiv("div",void 0,"scanovate-card-capture-index-capture-button-container"),v=this.createDiv("button","capture-button","scanovate-card-capture-index-capture-button","hidden"),f=this.createDiv("div","myModal","scanovate-card-capture-index-modal"),y=this.createDiv("div","modal-content","scanovate-card-capture-index-modal-content"),g=this.createDiv("div",void 0,"scanovate-card-capture-index-close");g.innerHTML+=this.data&&this.data.CONFIRM_BUTTON||this.translation.CONFIRM_BUTTON;const C=this.createDiv("p",void 0,"scanovate-card-capture-index-modal-text");C.innerHTML+=this.data&&this.data.POPUP_TEXT||this.translation.POPUP_TEXT;const O=this.createDiv("img",void 0,"scanovate-card-capture-index-modal-gif",void 0,void 0,"scanovate_card_capture/assets/flip_ocr.gif");n.appendChild(r),n.appendChild(l),n.appendChild(f),a.appendChild(o),l.appendChild(a),l.appendChild(d),l.appendChild(m),d.appendChild(p),d.appendChild(h),m.appendChild(v),f.appendChild(y),y.appendChild(O),y.appendChild(C),y&&(y.innerHTML+="<hr>"),y.appendChild(g);const b=[n,a,l,d,f];this.videoObj=new i(u,{width:1920,height:1080,aspectRatio:1.777777778});const S=e=>{for(let e=0;e<b.length;e++)if("undefined"===b[e]||"null"===b[e])return;a.style.visibility="hidden",l.style.visibility="hidden",u.style.visibility="hidden",v.style.visibility="hidden";const t=function(){d.appendChild(u),T(),r.style.opacity="0",a.style.visibility="visible",l.style.visibility="visible",u.style.visibility="visible"};!0!==e?this.initPromise=this.videoObj.init().then(e=>{t()}).catch(e=>{s(`Error name: ${e&&e.name}, message: ${e&&e.message}`),this.emit("error",e)}):t(),p.innerHTML=this.data&&this.data.POSITION_INSTRUCTION_FRONT_SIDE||this.translation.POSITION_INSTRUCTION_FRONT_SIDE},T=()=>{window.innerWidth>window.innerHeight?(a.style.marginBottom="225px",a.style.marginRight="15px",u.style.maxHeight="248px",u.style.maxWidth="440px",p.style.fontSize="17px",h.style.maxHeight="248px",h.style.maxWidth="440px",m.style.right="10px",m.style.top="45%",m.style.bottom="unset",m.style.left="unset",m.style.width="35",m.style.height="35",m.style.marginLeft="15",l.style.flexDirection="row",p.style.transform="rotate(0deg)",h.style.transform="rotate(0deg)"):(a.style.marginBottom="10px",a.style.marginRight="300px",n.style.height="100%",u.style.maxHeight="440px",u.style.maxWidth="248px",p.style.fontSize="14px",h.style.maxHeight="440px",h.style.maxWidth="440px",m.style.bottom="20px",m.style.left="45%",m.style.right="unset",m.style.top="unset",h.style.transform="rotate(90deg)",m.style.width="35",m.style.height="35",l.style.flexDirection="column",p.style.transform="rotate(90deg)")};S();window.addEventListener("resize",()=>{S(!0)},!1);const w=()=>{f.style.display="none",h.style.display="none",u.style.display="block"},E=()=>{u.style.display="none",h.style.display="block",f.style.display="flex",p.innerHTML=this.data&&this.data.POSITION_INSTRUCTION_BACK_SIDE||this.translation.POSITION_INSTRUCTION_BACK_SIDE,this.videoObj.capture().then(e=>{t.push(e),h.src=t[0],t.length===this.numOfPics&&(f.style.display="none",u.style.display="block",h.style.display="none",this.img_1=t[0],this.img_2=t[1],this.emit("success",{firstCapture:t[0],secondCapture:void 0===t[1]?null:t[1]}),document.querySelector("body")&&(document.querySelector("body").style.background="unset"),this.data&&this.data.SHOW_RESULTS&&this.redirectToResults(),c=null,this.destroyFirstPage())})};return e||(l.onclick=()=>{"none"===window.getComputedStyle(f).getPropertyValue("display")&&E()},g.onclick=w),n}secondPage(){let e=[],t=this.img_1,n=null;this.numOfPics>1&&(n=this.img_2);let i={firstCapture:t,secondCapture:n};this.emit("success",i);const r=document.createElement("main"),s=this.createDiv("div","main-container","scanovate-card-capture-main-container"),a=this.createDiv("div",void 0,"scanovate-card-capture-image-result-container"),o=this.createDiv("div","data-result","scanovate-card-capture-data-result"),c=this.createDiv("a");c.onclick=()=>{this.redirectToCapture()};const l=this.createDiv("button",void 0,"scanovate-card-capture-back-button"),d=this.createDiv("img",void 0,"scanovate-card-capture-arrow",void 0,void 0),u=this.createDiv("div","image-result-container","scanovate-card-capture-image-result-container"),h=this.createDiv("div",void 0,"scanovate-card-capture-image-result-wrap"),p=this.createDiv("p","image-title-1","scanovate-card-capture-img-title"),m=this.createDiv("img","image_1","scanovate-card-capture-img-result",void 0,void 0,t),v=this.createDiv("div",void 0,"scanovate-card-capture-image-result-wrap"),f=this.createDiv("p","image-title-2","scanovate-card-capture-img-title");let y;this.numOfPics>1&&(y=this.createDiv("img","image_2","scanovate-card-capture-img-result",void 0,void 0,n));const g=this.createDiv("p","title","scanovate-card-capture-title");g.innerHTML=this.data.RESULTS_PAGE_TITLE;const C=this.createDiv("p","text","scanovate-card-capture-inner-title");C.innerHTML=this.data.RESULTS_CONDITIONS_TITLE;for(let t=0;t<this.data.CONDITIONS.length;t++){let n=this.createDiv("p",void 0,"scanovate-card-capture-text");const i=this.createDiv("span",void 0,"scanovate-card-capture-row-number");i.innerHTML+=""+(t+1);this.createDiv("span","inner-text-"+(t+1)).innerHTML+=this.data.CONDITIONS[t].CONDITION,n.appendChild(i),n.innerHTML+="&nbsp;&nbsp; "+this.data.CONDITIONS[t].CONDITION,e.push(n)}const O=this.createDiv("div",void 0,"scanovate-card-capture-buttons-container"),b=this.createDiv("a");b.onclick=()=>{this.destroySecondPage.call(this),window.removeEventListener("resize",_)};const S=this.createDiv("input",void 0,"scanovate-card-capture-ok-button");S.type="button",S.value=this.data.CONFIRM_BUTTON;const T=this.createDiv("a");T.onclick=()=>{this.redirectToCapture()};const w=this.createDiv("input",void 0,"scanovate-card-capture-tryagain-button");w.type="button",w.value=this.data.TRY_AGAIN_BUTTON,r.appendChild(s),s.appendChild(a),s.appendChild(o),a.appendChild(c),c.appendChild(l),l.appendChild(d),a.appendChild(u),u.appendChild(h),h.appendChild(p),h.appendChild(m),u.appendChild(v),v.appendChild(f),this.numOfPics>1&&v.appendChild(y),o.appendChild(g),o.appendChild(C),o.appendChild(e[0]),o.appendChild(e[1]),o.appendChild(e[2]),o.appendChild(O),O.appendChild(S),O.appendChild(b),O.appendChild(T),T.appendChild(w),b.appendChild(S);const E=()=>{1===this.data.NUMBER_OF_IMAGES&&(v.style.visibility="hidden"),window.innerWidth>window.innerHeight?(s.style.flexDirection="row",u.style.justifyContent="unset",o.style.alignItems="unset",o.style.flex="inherit",o.style.paddingLeft="30",o.style.paddingright="30",m.style.width="300",m.style.height="176",this.numOfPics>1&&(y.style.width="300",y.style.height="176"),g.style.fontSize="30px"):(s.style.flexDirection="column",u.style.justifyContent="space-evenly",o.style.paddingLeft="30",o.style.paddingright="30",o.style.alignItems="center",o.style.flex="0.5",m.style.width="500",m.style.height="294",this.numOfPics>1&&(y.style.width="500",y.style.height="294"),g.style.fontSize="30px")};E();const _=()=>{E()};window.addEventListener("resize",_,!1);return r}redirectToCapture(e){let t=this.firstPage(e),n=document.querySelector("body");n.style.padding="0",n.style.margin="0",n.style.position="fixed",n.appendChild(t),document.querySelector("main")&&document.querySelector("main").remove()}redirectToResults(){this.destroyFirstPage();let e=this.secondPage(),t=document.querySelector("body");t.style.position="fixed",t.style.margin="0",t.style.padding="0",t.appendChild(e),document.querySelector("section")&&document.querySelector("section").remove(),document.querySelector("body")&&(document.querySelector("body").style.background="unset")}init(e,t){s("Card capture is initiating with the following config: "+JSON.stringify(e)),this.applyNewConfig(e||null),this.redirectToCapture(t)}destroyFirstPage(){s("destroy first page has called"),document.querySelector("section")&&document.querySelector("section").remove(),document.querySelector("body")&&(document.querySelector("body").style.background="unset"),c=null,document.querySelector("html").style.background="unset",window.onclick=null,this.initPromise=null,null!==this.videoObj&&void 0!==this.videoObj&&(this.videoObj.destroy(null),this.videoObj=null)}destroySecondPage(){document.querySelector("main")&&document.querySelector("main").remove(),document.querySelector("body")&&(document.querySelector("body").style.background="unset"),document.body.style.height="inherent",document.body.style.position="initial",document.body.style.padding="inherent",document.body.style.margin="inherent"}}return null===c&&(c=new d),c}},function(e,t){var n,i,r=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var c,l=[],d=!1,u=-1;function h(){d&&c&&(d=!1,c.length?l=c.concat(l):u=-1,l.length&&p())}function p(){if(!d){var e=o(h);d=!0;for(var t=l.length;t;){for(c=l,l=[];++u<t;)c&&c[u].run();u=-1,t=l.length}c=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||d||o(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){e.exports=function(e){function t(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return i.colors[Math.abs(t)%i.colors.length]}function i(e){let n;function a(...e){if(!a.enabled)return;const t=a,r=Number(new Date),s=r-(n||r);t.diff=s,t.prev=n,t.curr=r,n=r,e[0]=i.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,r)=>{if("%%"===n)return n;o++;const s=i.formatters[r];if("function"==typeof s){const i=e[o];n=s.call(t,i),e.splice(o,1),o--}return n}),i.formatArgs.call(t,e);(t.log||i.log).apply(t,e)}return a.namespace=e,a.enabled=i.enabled(e),a.useColors=i.useColors(),a.color=t(e),a.destroy=r,a.extend=s,"function"==typeof i.init&&i.init(a),i.instances.push(a),a}function r(){const e=i.instances.indexOf(this);return-1!==e&&(i.instances.splice(e,1),!0)}function s(e,t){const n=i(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return i.debug=i,i.default=i,i.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},i.disable=function(){const e=[...i.names.map(a),...i.skips.map(a).map(e=>"-"+e)].join(",");return i.enable(""),e},i.enable=function(e){let t;i.save(e),i.names=[],i.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$")));for(t=0;t<i.instances.length;t++){const e=i.instances[t];e.enabled=i.enabled(e.namespace)}},i.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=i.skips.length;t<n;t++)if(i.skips[t].test(e))return!1;for(t=0,n=i.names.length;t<n;t++)if(i.names[t].test(e))return!0;return!1},i.humanize=n(7),Object.keys(e).forEach(t=>{i[t]=e[t]}),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=t,i.enable(i.load()),i}},function(e,t){var n=1e3,i=6e4,r=60*i,s=24*r;function a(e,t,n,i){var r=t>=1.5*n;return Math.round(e/n)+" "+i+(r?"s":"")}e.exports=function(e,t){t=t||{};var o=typeof e;if("string"===o&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return 6048e5*a;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*i;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===o&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=s)return a(e,t,s,"day");if(t>=r)return a(e,t,r,"hour");if(t>=i)return a(e,t,i,"minute");if(t>=n)return a(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=s)return Math.round(e/s)+"d";if(t>=r)return Math.round(e/r)+"h";if(t>=i)return Math.round(e/i)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";e.exports=function(e){if(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia){const t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,i){t.call(navigator,e,n,i)})):Promise.reject(new Error("getUserMedia"))}return navigator.mediaDevices.getUserMedia(e)}},function(e,t,n){"use strict";const i=["rear","back","rück","arrière","trasera","trás","traseira","posteriore","后面","後面","背面","后置","後置","背置","задней","الخلفية","후","arka","achterzijde","หลัง","baksidan","bagside","sau","bak","tylny","takakamera","belakang","אחורית","πίσω","spate","hátsó","zadní","darrere","zadná","задня","stražnja","belakang","बैक"];e.exports={isLabelBackLabel:function(e){if(!e)return!1;for(let t=0;t<i.length;t++)if(e.toLowerCase().includes(i[t]))return!0;return!1}}},function(e,t,n){"use strict";e.exports={getTranslationObject:function(e){return n("en"===e?11:12)}}},function(e){e.exports=JSON.parse('{"LANDSCAPE_MODE_NEEDED":"Please rotate phone to landscape mode","POSITION_INSTRUCTION":"Please make sure the card is within the frame","POSITION_INSTRUCTION_FRONT":"Please make sure the card is within the frame and turned <b>front side</b> to the camera","POSITION_INSTRUCTION_BACK":"Please make sure the card is within the frame and turned <b>back side</b> to the camera","NO_CAMERA_ACCESS":"Please allow camera access","CHROME_CAMERA_OPEN_INSTRUCTIONS":"In Chrome, please go to \'Settings\' -> \'Site settings\' -> \'Camera\' -> \'Blocked\' tab, press on our website, press \'CLEAR & RESET and then refresh the page","SAFARI_CAMERA_OPEN_INSTRUCTIONS":"In Safari, please refresh the page and then press \'Allow\' when the camera notification appear","UNKNOWN_CAMERA_OPEN_INSTRUCTIONS":"Please enable our site to access the camera","FIREFOX_CAMERA_OPEN_INSTRUCTIONS":"In Firefox, please refresh the page and then press \'Allow\' when the camera notification appear","CONFIRM_BUTTON":"OK","POPUP_TEXT":"Capture back side","POSITION_INSTRUCTION_FRONT_SIDE":"Align your ID (front side) in the frame","POSITION_INSTRUCTION_BACK_SIDE":"Align your ID (back side) in the frame"}')},function(e){e.exports=JSON.parse('{"LANDSCAPE_MODE_NEEDED":"אנא סובב את הטלפון למצב אופקי","POSITION_INSTRUCTION":"נא למקם את התעודה בגבולות המסגרת","POSITION_INSTRUCTION_FRONT":"אנא וודא שהכרטיס נמצא בתוך המסגרת וצידו הקדמי מופנה למצלמה","POSITION_INSTRUCTION_BACK":"אנא וודא שהכרטיס נמצא בתוך המסגרת וצידו האחורי מופנה למצלמה","NO_CAMERA_ACCESS":"Please allow camera access","CHROME_CAMERA_OPEN_INSTRUCTIONS":"In Chrome, please go to \'Settings\' -> \'Site settings\' -> \'Camera\' -> \'Blocked\' tab, press on our website, press \'CLEAR & RESET and then refresh the page","SAFARI_CAMERA_OPEN_INSTRUCTIONS":"In Safari, please refresh the page and then press \'Allow\' when the camera notification appear","UNKNOWN_CAMERA_OPEN_INSTRUCTIONS":"Please enable our site to access the camera","FIREFOX_CAMERA_OPEN_INSTRUCTIONS":"In Firefox, please refresh the page and then press \'Allow\' when the camera notification appear","CONFIRM_BUTTON":"בסדר","POPUP_TEXT":"צלם צד אחורי","POSITION_INSTRUCTION_FRONT_SIDE":"מקם את התעודה (צדק קידמי) בתוך המסגרת","POSITION_INSTRUCTION_BACK_SIDE":"מקם את התעודה (צדק אחורי) בתוך המסגרת"}')},function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var i=0,r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t);return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}}])}));
//# sourceMappingURL=script.js.map